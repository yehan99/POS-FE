<div class="auth-container">
  <div class="auth-card">
    <!-- Header Section -->
    <div class="auth-header">
      <div class="logo-container">
        <mat-icon class="logo-icon">storefront</mat-icon>
        <h1 class="brand-name">Paradise POS</h1>
      </div>
      <h2 class="auth-title">Forgot Password?</h2>
      <p class="auth-subtitle">
        {{ emailSent ? 'Check your email' : 'No worries, we\'ll send you reset instructions' }}
      </p>
    </div>

    <!-- Success Message -->
    <div *ngIf="emailSent" class="success-message">
      <mat-icon class="success-icon">mark_email_read</mat-icon>
      <h3>Email Sent Successfully!</h3>
      <p>
        We've sent password reset instructions to your email address.
        Please check your inbox and follow the instructions to reset your password.
      </p>
      <p class="note">
        Didn't receive the email? Check your spam folder or
        <a (click)="emailSent = false; onSubmit()" class="link-primary">resend the email</a>.
      </p>
    </div>

    <!-- Forgot Password Form -->
    <form *ngIf="!emailSent" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="auth-form">

      <div class="info-box">
        <mat-icon>info</mat-icon>
        <p>Enter your email address and we'll send you a link to reset your password.</p>
      </div>

      <!-- Email Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email Address</mat-label>
        <input matInput type="email" formControlName="email" placeholder="your@email.com" autocomplete="email">
        <mat-icon matPrefix>email</mat-icon>
        <mat-error *ngIf="forgotPasswordForm.get('email')?.invalid">
          {{ getErrorMessage() }}
        </mat-error>
      </mat-form-field>

      <!-- Submit Button -->
      <button mat-raised-button color="primary" type="submit" class="full-width submit-btn" [disabled]="isLoading">
        <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
        <span *ngIf="!isLoading">Send Reset Link</span>
      </button>

      <!-- Back to Login Link -->
      <div class="auth-footer">
        <a routerLink="/auth/login" class="back-link">
          <mat-icon>arrow_back</mat-icon>
          <span>Back to Sign In</span>
        </a>
      </div>
    </form>

    <!-- Back to Login (after email sent) -->
    <div *ngIf="emailSent" class="auth-footer" style="margin-top: 2rem;">
      <button mat-raised-button color="primary" routerLink="/auth/login" class="full-width">
        Back to Sign In
      </button>
    </div>
  </div>
</div>
