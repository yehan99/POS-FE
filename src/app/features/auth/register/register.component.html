<div class="auth-container">
  <div class="auth-card register-card">
    <!-- Header Section -->
    <div class="auth-header">
      <div class="logo-container">
        <mat-icon class="logo-icon">storefront</mat-icon>
        <h1 class="brand-name">Paradise POS</h1>
      </div>
      <h2 class="auth-title">Create Your Account</h2>
      <p class="auth-subtitle">Start your 14-day free trial, no credit card required</p>
    </div>

    <!-- Register Form -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="auth-form">
      <!-- Name Fields Row -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="half-width">
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" placeholder="John" autocomplete="given-name">
          <mat-icon matPrefix>person</mat-icon>
          <mat-error *ngIf="registerForm.get('firstName')?.invalid">
            {{ getErrorMessage('firstName') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" placeholder="Doe" autocomplete="family-name">
          <mat-error *ngIf="registerForm.get('lastName')?.invalid">
            {{ getErrorMessage('lastName') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Email Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email Address</mat-label>
        <input matInput type="email" formControlName="email" placeholder="your@email.com" autocomplete="email">
        <mat-icon matPrefix>email</mat-icon>
        <mat-error *ngIf="registerForm.get('email')?.invalid">
          {{ getErrorMessage('email') }}
        </mat-error>
      </mat-form-field>

      <!-- Phone Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Phone Number (Optional)</mat-label>
        <input matInput type="tel" formControlName="phone" placeholder="0771234567" autocomplete="tel">
        <mat-icon matPrefix>phone</mat-icon>
        <mat-error *ngIf="registerForm.get('phone')?.invalid">
          {{ getErrorMessage('phone') }}
        </mat-error>
      </mat-form-field>

      <!-- Business Information -->
      <div class="section-divider">
        <span>Business Information</span>
      </div>

      <!-- Business Name Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Business Name</mat-label>
        <input matInput formControlName="businessName" placeholder="Your Business Name" autocomplete="organization">
        <mat-icon matPrefix>business</mat-icon>
        <mat-error *ngIf="registerForm.get('businessName')?.invalid">
          {{ getErrorMessage('businessName') }}
        </mat-error>
      </mat-form-field>

      <!-- Business Type Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Business Type</mat-label>
        <mat-select formControlName="businessType">
          <mat-option *ngFor="let type of businessTypes" [value]="type.value">
            {{ type.label }}
          </mat-option>
        </mat-select>
        <mat-icon matPrefix>category</mat-icon>
        <mat-error *ngIf="registerForm.get('businessType')?.invalid">
          {{ getErrorMessage('businessType') }}
        </mat-error>
      </mat-form-field>

      <!-- Password Fields -->
      <div class="section-divider">
        <span>Security</span>
      </div>

      <!-- Password Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Password</mat-label>
        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
          placeholder="At least 8 characters" autocomplete="new-password">
        <mat-icon matPrefix>lock</mat-icon>
        <button mat-icon-button matSuffix type="button" (click)="hidePassword = !hidePassword"
          [attr.aria-label]="'Hide password'">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('password')?.invalid">
          {{ getErrorMessage('password') }}
        </mat-error>
      </mat-form-field>

      <!-- Confirm Password Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Confirm Password</mat-label>
        <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword"
          placeholder="Re-enter your password" autocomplete="new-password">
        <mat-icon matPrefix>lock_outline</mat-icon>
        <button mat-icon-button matSuffix type="button" (click)="hideConfirmPassword = !hideConfirmPassword"
          [attr.aria-label]="'Hide password'">
          <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="registerForm.get('confirmPassword')?.invalid || registerForm.hasError('passwordMismatch')">
          {{ getErrorMessage('confirmPassword') }}
        </mat-error>
      </mat-form-field>

      <!-- Terms and Conditions -->
      <div class="terms-checkbox">
        <mat-checkbox formControlName="agreeToTerms" color="primary">
          I agree to the <a href="/terms" target="_blank">Terms of Service</a>
          and <a href="/privacy" target="_blank">Privacy Policy</a>
        </mat-checkbox>
        <mat-error *ngIf="registerForm.get('agreeToTerms')?.touched && registerForm.get('agreeToTerms')?.invalid">
          You must agree to the terms and conditions
        </mat-error>
      </div>

      <!-- Submit Button -->
      <button mat-raised-button color="primary" type="submit" class="full-width submit-btn" [disabled]="isLoading">
        <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
        <span *ngIf="!isLoading">Create Account</span>
      </button>

      <!-- Login Link -->
      <div class="auth-footer">
        <p>Already have an account?
          <a routerLink="/auth/login" class="link-primary">Sign in</a>
        </p>
      </div>
    </form>

    <!-- Features -->
    <div class="auth-features">
      <div class="feature-item">
        <mat-icon>verified</mat-icon>
        <span>14-day free trial</span>
      </div>
      <div class="feature-item">
        <mat-icon>credit_card_off</mat-icon>
        <span>No credit card required</span>
      </div>
      <div class="feature-item">
        <mat-icon>support_agent</mat-icon>
        <span>24/7 customer support</span>
      </div>
    </div>
  </div>
</div>
