<div class="device-status-dashboard">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">Device Status Dashboard</h1>
        <p class="page-subtitle">Real-time hardware monitoring and diagnostics</p>
      </div>
      <div class="header-actions">
        <button class="btn-icon" [class.active]="autoRefreshEnabled" (click)="toggleAutoRefresh()"
          [attr.aria-label]="autoRefreshEnabled ? 'Disable auto-refresh' : 'Enable auto-refresh'">
          <mat-icon>{{ autoRefreshEnabled ? 'sync' : 'sync_disabled' }}</mat-icon>
        </button>
        <button class="btn-primary" (click)="refreshStatus()">
          <mat-icon>refresh</mat-icon>
          <span>Refresh</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Summary Cards -->
  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="summary-card health-card">
      <div class="card-icon">
        <mat-icon>dashboard</mat-icon>
      </div>
      <div class="card-content">
        <div class="card-value" [ngClass]="getHealthColor(systemHealth.overall)">
          {{ systemHealth.overall }}%
        </div>
        <div class="card-label">System Health</div>
        <div class="card-sublabel">Overall score</div>
      </div>
    </div>

    <div class="summary-card">
      <div class="card-icon success">
        <mat-icon>check_circle</mat-icon>
      </div>
      <div class="card-content">
        <div class="card-value">{{ systemHealth.connectedDevices }}/{{ systemHealth.totalDevices }}</div>
        <div class="card-label">Connected</div>
        <div class="card-sublabel">Active devices</div>
      </div>
    </div>

    <div class="summary-card">
      <div class="card-icon primary">
        <mat-icon>bar_chart</mat-icon>
      </div>
      <div class="card-content">
        <div class="card-value">{{ systemHealth.totalOperations | number }}</div>
        <div class="card-label">Operations</div>
        <div class="card-sublabel">Total executed</div>
      </div>
    </div>

    <div class="summary-card">
      <div class="card-icon" [ngClass]="systemHealth.totalErrors > 0 ? 'error' : 'success'">
        <mat-icon>{{ systemHealth.totalErrors > 0 ? 'error' : 'verified' }}</mat-icon>
      </div>
      <div class="card-content">
        <div class="card-value" [ngClass]="systemHealth.totalErrors > 0 ? 'error-text' : ''">
          {{ systemHealth.totalErrors }}
        </div>
        <div class="card-label">Errors</div>
        <div class="card-sublabel">System-wide</div>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Device List -->
    <div class="card devices-card">
      <div class="card-header">
        <h2 class="card-title">
          <mat-icon>devices</mat-icon>
          <span>Devices</span>
        </h2>
        <span class="device-count">{{ deviceHealthList.length }} total</span>
      </div>
      <div class="card-body">
        <div class="device-list" *ngIf="deviceHealthList.length > 0">
          <div *ngFor="let device of deviceHealthList" class="device-item"
            [class.selected]="selectedDevice?.deviceId === device.deviceId" (click)="selectDevice(device)" tabindex="0"
            role="button" [attr.aria-label]="'Select device: ' + device.deviceName"
            (keydown.enter)="selectDevice(device)" (keydown.space)="selectDevice(device); $event.preventDefault()">
            <div class="device-icon" [ngClass]="getStatusColor(device.status)">
              <mat-icon>{{ getDeviceIcon(device.type) }}</mat-icon>
            </div>
            <div class="device-info">
              <div class="device-name">{{ device.deviceName }}</div>
              <div class="device-type">{{ device.type }}</div>
            </div>
            <div class="device-metrics">
              <div class="health-score" [ngClass]="getHealthColor(device.healthScore)">
                {{ device.healthScore }}%
              </div>
              <div class="status-badge" [ngClass]="getStatusColor(device.status)">
                {{ device.status }}
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="deviceHealthList.length === 0" class="empty-state">
          <mat-icon>device_hub</mat-icon>
          <p>No devices registered</p>
          <button class="btn-secondary" routerLink="/hardware">
            <mat-icon>add</mat-icon>
            <span>Configure Devices</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Device Details & Alerts Column -->
    <!-- Device Details & Alerts Column -->
    <div class="details-column">
      <!-- Device Details -->
      <div class="card" *ngIf="selectedDevice">
        <div class="card-header">
          <h2 class="card-title">
            <mat-icon [ngClass]="getStatusColor(selectedDevice.status)">
              {{ getDeviceIcon(selectedDevice.type) }}
            </mat-icon>
            <span>{{ selectedDevice.deviceName }}</span>
          </h2>
          <div class="status-badge large" [ngClass]="getStatusColor(selectedDevice.status)">
            {{ selectedDevice.status }}
          </div>
        </div>
        <div class="card-body">
          <div class="device-details-grid">
            <div class="detail-item">
              <div class="detail-label">Health Score</div>
              <div class="detail-value health" [ngClass]="getHealthColor(selectedDevice.healthScore)">
                {{ selectedDevice.healthScore }}%
              </div>
            </div>

            <div class="detail-item">
              <div class="detail-label">Uptime</div>
              <div class="detail-value">{{ formatUptime(selectedDevice.uptime) }}</div>
            </div>

            <div class="detail-item">
              <div class="detail-label">Operations</div>
              <div class="detail-value">{{ selectedDevice.operationsCount | number }}</div>
            </div>

            <div class="detail-item">
              <div class="detail-label">Errors</div>
              <div class="detail-value" [class.error-text]="selectedDevice.errorCount > 0">
                {{ selectedDevice.errorCount }}
              </div>
            </div>

            <div class="detail-item" *ngIf="selectedDevice.responseTime">
              <div class="detail-label">Response Time</div>
              <div class="detail-value">{{ selectedDevice.responseTime }}ms</div>
            </div>

            <div class="detail-item" *ngIf="selectedDevice.lastActivity">
              <div class="detail-label">Last Activity</div>
              <div class="detail-value">{{ selectedDevice.lastActivity | date: 'short' }}</div>
            </div>
          </div>

          <div class="card-actions">
            <button class="btn-primary" (click)="testDevice(selectedDevice)">
              <mat-icon>play_arrow</mat-icon>
              <span>Test Device</span>
            </button>
            <button class="btn-secondary" routerLink="/hardware">
              <mat-icon>settings</mat-icon>
              <span>Configure</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Alerts Panel -->
      <div class="card alerts-card">
        <div class="card-header">
          <h2 class="card-title">
            <mat-icon>notifications</mat-icon>
            <span>Alerts</span>
            <span class="alert-badge" *ngIf="alerts.length > 0">{{ alerts.length }}</span>
          </h2>
        </div>
        <div class="card-body">
          <div class="alerts-list" *ngIf="alerts.length > 0">
            <div *ngFor="let alert of alerts" class="alert-item"
              [ngClass]="[alert.type, alert.acknowledged ? 'acknowledged' : '']">
              <div class="alert-icon">
                <mat-icon>{{ alert.type === 'error' ? 'error' : alert.type === 'warning' ? 'warning' : 'info'
                  }}</mat-icon>
              </div>
              <div class="alert-content">
                <div class="alert-device">{{ alert.device }}</div>
                <div class="alert-message">{{ alert.message }}</div>
                <div class="alert-time">{{ alert.timestamp | date: 'short' }}</div>
              </div>
              <div class="alert-actions">
                <button class="btn-icon-sm" *ngIf="!alert.acknowledged" (click)="acknowledgeAlert(alert)"
                  aria-label="Acknowledge alert">
                  <mat-icon>check</mat-icon>
                </button>
                <button class="btn-icon-sm" (click)="dismissAlert(alert)" aria-label="Dismiss alert">
                  <mat-icon>close</mat-icon>
                </button>
              </div>
            </div>
          </div>

          <div *ngIf="alerts.length === 0" class="empty-state small">
            <mat-icon>check_circle</mat-icon>
            <p>No active alerts</p>
          </div>

          <button *ngIf="alerts.length > 0" class="btn-text clear-all" (click)="clearAllAlerts()">
            Clear All Alerts
          </button>
        </div>
      </div>

      <!-- Recent Events -->
      <div class="card events-card">
        <div class="card-header">
          <h2 class="card-title">
            <mat-icon>history</mat-icon>
            <span>Recent Events</span>
          </h2>
        </div>
        <div class="card-body">
          <div class="events-list" *ngIf="recentEvents.length > 0">
            <div *ngFor="let event of recentEvents.slice(0, 10)" class="event-item">
              <div class="event-icon" [ngClass]="getEventColor(event.type)">
                <mat-icon>{{ getEventIcon(event.type) }}</mat-icon>
              </div>
              <div class="event-content">
                <div class="event-type">{{ event.type }}</div>
                <div class="event-time">{{ event.timestamp | date: 'short' }}</div>
              </div>
            </div>
          </div>

          <div *ngIf="recentEvents.length === 0" class="empty-state small">
            <mat-icon>event_note</mat-icon>
            <p>No recent events</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="page-footer" *ngIf="lastRefreshTime">
    <div class="footer-info">
      <mat-icon>schedule</mat-icon>
      <span>Last updated: {{ lastRefreshTime | date: 'medium' }}</span>
    </div>
    <div class="footer-info">
      <mat-icon>timer</mat-icon>
      <span>System uptime: {{ formatUptime(systemHealth.systemUptime) }}</span>
    </div>
    <div class="footer-info" *ngIf="autoRefreshEnabled">
      <mat-icon>sync</mat-icon>
      <span>Auto-refresh: {{ refreshInterval }}s</span>
    </div>
  </div>
</div>
