// ================================================================
// Product Search Lookup - Luxury Theme with Material Autocomplete
// Reusable search component with elegant dropdown
// ================================================================

$deep-navy: #102a43;
$navy-dark: #0b1c2c;
$accent-gold: #d4a574;
$muted-slate: #6b7a8d;

.product-search-lookup {
  width: 100%;

  .search-field {
    width: 100%;

    ::ng-deep {
      .mat-mdc-form-field-flex {
        background: transparent;
        border-radius: 14px;
        padding: 0 0.5rem;
      }

      .mat-mdc-form-field-focus-overlay {
        background-color: transparent;
      }

      .mdc-notched-outline {
        .mdc-notched-outline__leading,
        .mdc-notched-outline__notch,
        .mdc-notched-outline__trailing {
          border-color: rgba($deep-navy, 0.2) !important;
          border-width: 1px;
        }
      }

      .mat-mdc-form-field.mat-focused {
        .mdc-notched-outline {
          .mdc-notched-outline__leading,
          .mdc-notched-outline__notch,
          .mdc-notched-outline__trailing {
            border-color: $deep-navy !important;
            border-width: 2px;
          }
        }

        .mat-mdc-form-field-flex {
          background: transparent;
          box-shadow: none;
        }
      }

      .mat-mdc-input-element {
        color: #12263f;
        font-size: 1rem;
        padding: 1rem 0;

        &::placeholder {
          color: $muted-slate;
        }
      }

      .mat-icon {
        color: $deep-navy;
      }

      .search-spinner {
        ::ng-deep circle {
          stroke: $deep-navy;
        }
      }

      // Remove the notch border for cleaner look
      .mdc-notched-outline__notch {
        border-right: none !important;
        border-left: none !important;
      }
    }
  }
}

// Autocomplete Panel Styling (global)
::ng-deep .product-autocomplete.mat-mdc-autocomplete-panel {
  background: white;
  border-radius: 16px;
  box-shadow: 0 12px 40px rgba(15, 23, 42, 0.15);
  margin-top: 0.5rem;
  max-height: 420px;

  // Override Material's default icon margins
  .mat-mdc-option .mat-icon {
    margin-right: 0 !important;
    margin-left: 0 !important;
  }

  .mat-mdc-option {
    padding: 0 !important;
    min-height: auto !important;
    height: auto !important;

    .mdc-list-item__primary-text {
      width: 100%;
    }

    &.product-option {
      border-bottom: 1px solid rgba($deep-navy, 0.06);

      &:last-child {
        border-bottom: none;
      }

      &:hover,
      &.mdc-list-item--selected {
        background: linear-gradient(
          135deg,
          rgba($deep-navy, 0.05) 0%,
          rgba($deep-navy, 0.08) 100%
        ) !important;
      }

      &.mat-mdc-option-active {
        background: linear-gradient(
          135deg,
          rgba($deep-navy, 0.05) 0%,
          rgba($deep-navy, 0.08) 100%
        ) !important;
      }
    }

    .product-option-content {
      display: grid;
      grid-template-columns: 46px 1fr auto auto;
      align-items: center;
      gap: 1rem;
      padding: 0.9rem 1.25rem;
      width: 100%;
      box-sizing: border-box;

      .product-icon-wrapper {
        width: 46px;
        height: 46px;
        border-radius: 11px;
        background: linear-gradient(
          135deg,
          $deep-navy 0%,
          lighten($deep-navy, 6%) 100%
        );
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        box-shadow: 0 4px 12px rgba(16, 42, 67, 0.22);

        mat-icon {
          color: white;
          font-size: 24px;
          width: 24px;
          height: 24px;
        }
      }

      .product-details {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        min-width: 0;
        overflow: hidden;

        .product-name {
          font-weight: 600;
          color: #12263f;
          font-size: 0.95rem;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          line-height: 1.3;
        }

        .product-sku {
          display: inline-flex;
          align-items: center;
          gap: 0.35rem;
          color: $muted-slate;
          font-size: 0.8rem;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;

          mat-icon {
            font-size: 13px;
            width: 13px;
            height: 13px;
            flex-shrink: 0;
          }

          span {
            overflow: hidden;
            text-overflow: ellipsis;
          }
        }
      }

      .product-stock-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.4rem 0.8rem;
        border-radius: 8px;
        background: rgba(72, 187, 120, 0.1);
        color: #48bb78;
        font-size: 0.8rem;
        font-weight: 600;
        white-space: nowrap;
        border: 1px solid rgba(72, 187, 120, 0.25);

        mat-icon {
          font-size: 16px;
          width: 16px;
          height: 16px;
        }

        &.low-stock {
          background: rgba(237, 137, 54, 0.1);
          color: #ed8936;
          border-color: rgba(237, 137, 54, 0.25);

          mat-icon {
            color: #ed8936;
          }
        }

        &.out-of-stock {
          background: rgba(245, 101, 101, 0.1);
          color: #f56565;
          border-color: rgba(245, 101, 101, 0.25);

          mat-icon {
            color: #f56565;
          }
        }
      }

      .product-price-badge {
        font-size: 1.05rem;
        font-weight: 700;
        color: $accent-gold;
        white-space: nowrap;
        padding: 0.4rem 0.9rem;
        border-radius: 9px;
        background: rgba($accent-gold, 0.1);
        border: 1px solid rgba($accent-gold, 0.2);
      }
    }

    .loading-option {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      padding: 2rem;
      color: $muted-slate;

      mat-spinner ::ng-deep circle {
        stroke: $deep-navy;
      }

      span {
        font-size: 0.9rem;
        font-weight: 500;
      }
    }

    .no-results {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 2rem;
      gap: 1rem;
      text-align: center;

      mat-icon {
        font-size: 64px;
        width: 64px;
        height: 64px;
        color: rgba($deep-navy, 0.2);
      }

      .no-results-text {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;

        .title {
          font-size: 1rem;
          font-weight: 600;
          color: #12263f;
        }

        .subtitle {
          font-size: 0.875rem;
          color: $muted-slate;
        }
      }
    }
  }
}
